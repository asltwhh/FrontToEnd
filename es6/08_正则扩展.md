# RegExpæ‰©å±•

es5:

    ä¸å…è®¸var reg = new RegExp(/æ­£åˆ™è¡¨è¾¾å¼/åŒ¹é…æ¨¡å¼,'åŒ¹é…æ¨¡å¼')

es6å…è®¸ï¼Œå¦‚æœåé¢çš„åŒ¹é…æ¨¡å¼å’Œå‰é¢çš„é‡å¤ï¼Œåˆ™åé¢ä¼šè¦†ç›–æ‰å‰é¢

```
var reg = new RegExp(/ab/i);
console.log('abdshjfsab'.match(reg)); //[ 'ab', index: 0, input: 'abdshjfsab', groups: undefined ]
console.log(reg.test('abdshjfsab'));  //true
```

# uä¿®é¥°ç¬¦

es6ä¸­æ·»åŠ äº†uä¿®é¥°ç¬¦ï¼Œç”¨æ¥å¤„ç†å¤§äº\u0xFFFFçš„unicodeå­—ç¬¦

```
// \uD83D\uDC2Aæ˜¯ä¸€ä¸ªå››ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæ‰€ä»¥æ£€æµ‹ç»“æœä¸ºfalse
// æ£€æµ‹ğŸªæ˜¯å¦æ˜¯ä»¥ï¿½å¼€å¤´çš„
console.log('\uD83D\uDC2A');  //ğŸª
console.log('\uD83D');  // ï¿½
console.log(/^\uD83D/u.test('\uD83D\uDC2A')); // false
// æ³¨æ„ï¼šå¦‚æœä¸åŠ u,åˆ™ä¼šé»˜è®¤ğŸªæ˜¯ä¸¤ä¸ªå­—ç¬¦ï¼Œåˆ™è¾“å‡ºtrue
console.log(/^\uD83D/.test('\uD83D\uDC2A')); // true
```

(1) ç‚¹å­—ç¬¦
```
// æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä»¥é™¤äº†æ¢è¡Œæˆ–è€…è¡Œç»“æŸç¬¦ä»¥å¤–çš„å•ä¸ªå­—ç¬¦å¼€å¤´å¹¶ä¸”ç»“å°¾çš„
// .åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºé™¤äº†æ¢è¡Œæˆ–è€…è¡Œç»“æŸç¬¦ä»¥å¤–çš„å•ä¸ªå­—ç¬¦
var s = 'ğ ®·';

// ä¸åŠ uä¼šè¢«è®¤ä¸ºæ˜¯ä¸¤ä¸ªå­—ç¬¦
/^.$/.test(s) // false   (åŒä¸€ä¸ªå­—ç¬¦å¼€å¤´å¹¶ä¸”ç»“å°¾)
/^.$/u.test(s) // true,å¯ä»¥æ­£ç¡®æ£€æµ‹ç ç‚¹å¤§äº0xFFFFçš„å­—ç¬¦
```

ï¼ˆ2ï¼‰unicodeå­—ç¬¦è¡¨ç¤ºæ³•

es6æ–°å¢ä½¿ç”¨å¤§æ‹¬å·è¡¨ç¤ºunicodeå­—ç¬¦ï¼Œä½†æ˜¯åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ—¶éœ€è¦æ·»åŠ uä¿®é¥°ç¬¦ï¼Œè¯¥å¤§æ‹¬å·æ‰ä¼šè¢«è¯†åˆ«

```
æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«a

// åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­{n}è¡¨ç¤ºæŸä¸ªå†…å®¹æ­£å¥½å‡ºç°næ¬¡ï¼Œå¦‚æœä¸åŠ uï¼Œå°±ä¼šè¯†åˆ«ä¸ºæ¬¡æ•°
console.log(/\u{61}/.test('abced'));  // false
console.log(/\u{61}/u.test('abced'));  // true

æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«ğ ®·å­—ç¬¦
console.log(/\u{20BB7}/u.test('ğ ®·å’Œç¥é¼é£ä¸¹ç ‚'))  //true
```

ï¼ˆ3ï¼‰é‡è¯

ä½¿ç”¨uä¿®é¥°åï¼Œæ‰€æœ‰ä¸¤æ¬¡å‡å¯ä»¥æ­£ç¡®è¯†åˆ«ç ç‚¹å¤§äº0xFFFFçš„unicodeå­—ç¬¦

```
console.log(/ğ ®·{2}/u.test('ğ ®·ğ ®·'))  //true
console.log(/ğ ®·{2}/.test('ğ ®·ğ ®·'))  //false
```


# yä¿®é¥°ç¬¦

é™¤äº†uä¿®é¥°ç¬¦ï¼Œes6æä¾›äº†yä¿®é¥°ç¬¦ï¼Œyä¿®é¥°ç¬¦ä½œç”¨å’Œuä¿®é¥°ç¬¦ç±»ä¼¼ï¼Œå…¨å±€åŒ¹é…ï¼Œä½†æ˜¯yä¿®é¥°ç¬¦è¦æ±‚åŒ¹é…å¿…é¡»æ˜¯ä»å‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œgä¿®é¥°åªè¦æ±‚å‰©ä½™ä½ç½®ä¸­å­˜åœ¨åŒ¹é…å³å¯

```
var s = 'aaa_aa_a';
var r1 = /a+/g;
var r2 = /a+/y;

console.log(r1.exec(s));
console.log(r2.exec(s));
console.log(r1.exec(s));  //ç¬¬äºŒæ¬¡åŒ¹é…gåªè¦æ±‚å­˜åœ¨åŒ¹é…
console.log(r2.exec(s));   // yè¦å»ä»ç¬¬ä¸€ä¸ªä½ç½®ï¼Œä¹Ÿå°±æ˜¯_å¼€å§‹åŒ¹é…ï¼Œä¸åŒ¹é…å°±è¿”å›null

<!--
[ 'aaa', index: 0, input: 'aaa_aa_a', groups: undefined ]
[ 'aaa', index: 0, input: 'aaa_aa_a', groups: undefined ]
[ 'aa', index: 4, input: 'aaa_aa_a', groups: undefined ]
null
 -->
```

lastIndexå±æ€§ï¼šæŒ‡å®šæ¯æ¬¡åŒ¹é…çš„å¼€å§‹ä½ç½®(yå’ŒgåŒ¹é…æ¨¡å¼ä¸‹éƒ½å…·å¤‡)

```
const REGEX = /a/y;
REGEX.lastIndex = 1;  // å¼€å§‹ä½ç½®è®¾ä¸º1
console.log(REGEX.exec('xaya')) // a
console.log(REGEX.lastIndex)  // å¼€å§‹ä½ç½®ä¸º2
REGEX.lastIndex = 3;
console.log(REGEX.exec('xaya')) // a
```

# RegExp.prototype.stickyå±æ€§
es6ä¸ºæ­£åˆ™å®ä¾‹å¯¹è±¡å¢åŠ äº†stickyå±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†yä¿®é¥°ç¬¦

    var r = /hello\d/y;
    r.sticky  // true

# RegExp.prototype.flagså±æ€§
es6ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¢åŠ äº†flagså±æ€§ï¼Œä¼šè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦
es5çš„regå±æ€§è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„æ­£æ–‡

    var reg = /abc/y;
    console.log(reg.flags);  // y
    console.log(reg.source); // abc

# sä¿®é¥°ç¬¦ï¼šdotAllæ¨¡å¼

æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„.:è¡¨ç¤ºé™¤äº†å››å­—èŠ‚çš„utf-16å­—ç¬¦å’Œè¡Œç»ˆæ­¢ç¬¦ä¹‹å¤–çš„å…¶ä½™ä»»æ„å•ä¸ªå­—ç¬¦
    å››å­—èŠ‚çš„utf-16å­—ç¬¦å¯ä»¥ç”¨uä¿®é¥°ç¬¦è§£å†³
    è¡Œç»ˆæ­¢ç¬¦åŒ…å«ï¼š\n,\r(å›è½¦ç¬¦),è¡Œåˆ†éš”ç¬¦ï¼Œæ®µåˆ†éš”ç¬¦

æ‰€ä»¥es6å¼•å…¥äº†sä¿®é¥°ç¬¦ï¼Œåœ¨sæ¨¡å¼ä¸­ï¼Œç‚¹.å¯ä»¥åŒ¹é…ä»»æ„çš„å•ä¸ªå­—ç¬¦ï¼ŒåŒ…å«æ¢è¡Œç¬¦,ä½†æ˜¯å››å­—èŠ‚çš„utf-16éœ€è¦ä½¿ç”¨uä¿®é¥°ç¬¦

```
var reg = /abc.[0-9]{3}/;
console.log(reg.test('abc\n123'));  // false
var reg1 = /abc.[0-9]{3}/s;
console.log(reg1.test('abc\n123')); // true
```

# åè¡Œæ–­è¨€

å…ˆè¡Œæ–­è¨€ï¼š/x(?=y)/:xåªæœ‰åœ¨yçš„å‰ä¸€ä½æ‰åŒ¹é…
å…ˆè¡Œå¦å®šæ–­è¨€ï¼š/x(?!y)/:xåªæœ‰ä¸åœ¨yçš„å‰ä¸€ä½æ‰åŒ¹é…

```
var reg = /\d+(?=%)/;
console.log('100jfdjkf%34'.match(reg));  // åŒ¹é…å¤±è´¥
console.log('100%34'.match(reg));
var reg1 = /\d+(?!%)/;
console.log('100%34'.match(reg1));

/*
null
[ '100', index: 0, input: '100%34', groups: undefined ]
[ '10', index: 0, input: '100%34', groups: undefined ]
 */
```

åè¡Œæ–­è¨€/(?<=y)x/ï¼šxåªæœ‰åœ¨yçš„åä¸€ä½æ‰åŒ¹é…
åè¡Œå¦å®šæ–­è¨€/(?<!y)x/:xåªæœ‰ä¸åœ¨yçš„åä¸€ä½æ‰åŒ¹é…

# å…·åç»„åŒ¹é…
æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨åœ†æ‹¬å·è¿›è¡Œç»„åŒ¹é…ï¼Œä¾‹å¦‚

```
const REG = /(\d{4})-(\d{2})-(\d{2})/;
const RESULT = REG.exec('1997-02-15');
console.log(RESULT[1]);
console.log(RESULT[2]);
console.log(RESULT[3]);

/*
1997
02
15
 */
```

es2018å¼•å…¥äº†å…·åç»„åŒ¹é…ï¼Œå…è®¸ä¸ºæ¯ä¸€ä¸ªç»„åŒ¹é…åˆ¶å®šä¸€ä¸ªåå­—
    æ¯ä¸€ç»„çš„æ­£åˆ™è¡¨è¾¾å¼å¤´éƒ¨åŠ ä¸Š?<ç»„å>,ä¾‹å¦‚:

```
const REG = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
const RESULT = REG.exec('1997-02-15');
console.log(RESULT.groups.year);
console.log(RESULT.groups.month);
console.log(RESULT.groups.day);
/*
1997
02
15
*/
console.log(RESULT[1]);  //è¿™ä¸ªåŒæ ·é€‚ç”¨
console.log(RESULT[2]);
console.log(RESULT[3]);
/*
1997
02
15
 */
```

# String.prototype.matchAll()

ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸­å­˜åœ¨å¤šä¸ªåŒ¹é…ï¼Œjsä¸­ä¸€èˆ¬ä½¿ç”¨gä¿®é¥°ç¬¦æˆ–è€…yä¿®é¥°ç¬¦é€ä¸€å–å‡ºï¼›

```
var reg = /abc/g;
var string = 'abcdfgabchfjabcjdf';

var matchs = [];
var match;
while(match = reg.exec(string)){
    matchs.push(match);
}

console.log(matchs);

/*[
  [ 'abc', index: 0, input: 'abcdfgabchfjabcjdf', groups: undefined ],
  [ 'abc', index: 6, input: 'abcdfgabchfjabcjdf', groups: undefined ],
  [ 'abc', index: 12, input: 'abcdfgabchfjabcjdf', groups: undefined ]
]
*/
```

es6ä¸­å¼•å…¥äº†String.prototype.matchALl()æ–¹æ³•ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªéå†å™¨

(1)ä½¿ç”¨for...of...å°†å…¶ä¸€ä¸€æå–å¾—åˆ°

```
var reg = /abc/g;
var string = 'abcdfgabchfjabcjdf';

for (var match of string.matchAll(reg)){
    console.log(match);
}

/*
[ 'abc', index: 0, input: 'abcdfgabchfjabcjdf', groups: undefined ]
[ 'abc', index: 6, input: 'abcdfgabchfjabcjdf', groups: undefined ]
[ 'abc', index: 12, input: 'abcdfgabchfjabcjdf', groups: undefined ]
*/
```

(2)å°†å…¶ç›´æ¥è½¬æ¢ä¸ºä¸€ä¸ªæ•°ç»„
    æ–¹æ³•1ï¼š[...match]
    æ–¹æ³•2ï¼š[Array.from(match)]
```
var reg = /abc/g;
var string = 'abcdfgabchfjabcjdf';

var match = string.matchAll(reg);
var match_arr1 = [...match];
var match_arr2 = Array.from(match);

```
