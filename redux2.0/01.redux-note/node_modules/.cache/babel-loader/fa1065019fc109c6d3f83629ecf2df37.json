{"ast":null,"code":"import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/* tslint:disable:jsx-no-multiline-js */\n\n\nimport classnames from 'classnames';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport TouchFeedback from 'rmc-feedback';\nimport { getComponentLocale } from '../_util/getLocale';\nimport CustomInput from './CustomInput';\nimport Input from './Input';\n\nfunction noop() {}\n\nfunction normalizeValue(value) {\n  if (typeof value === 'undefined' || value === null) {\n    return '';\n  }\n\n  return value + '';\n}\n\nvar InputItem = function (_React$Component) {\n  _inherits(InputItem, _React$Component);\n\n  function InputItem(props) {\n    _classCallCheck(this, InputItem);\n\n    var _this = _possibleConstructorReturn(this, (InputItem.__proto__ || Object.getPrototypeOf(InputItem)).call(this, props));\n\n    _this.onInputChange = function (e) {\n      var el = e.target;\n      var rawVal = el.value;\n      var prePos = 0;\n\n      try {\n        // some input type do not support selection, see https://html.spec.whatwg.org/multipage/input.html#do-not-apply\n        prePos = el.selectionEnd || 0;\n      } catch (error) {\n        console.warn('Get selection error:', error);\n      }\n\n      var _this$state$value = _this.state.value,\n          preCtrlVal = _this$state$value === undefined ? '' : _this$state$value;\n      var type = _this.props.type;\n      var ctrlValue = rawVal;\n\n      switch (type) {\n        case 'bankCard':\n          ctrlValue = rawVal.replace(/\\D/g, '').replace(/(....)(?=.)/g, '$1 ');\n          break;\n\n        case 'phone':\n          ctrlValue = rawVal.replace(/\\D/g, '').substring(0, 11);\n          var valueLen = ctrlValue.length;\n\n          if (valueLen > 3 && valueLen < 8) {\n            ctrlValue = ctrlValue.substr(0, 3) + ' ' + ctrlValue.substr(3);\n          } else if (valueLen >= 8) {\n            ctrlValue = ctrlValue.substr(0, 3) + ' ' + ctrlValue.substr(3, 4) + ' ' + ctrlValue.substr(7);\n          }\n\n          break;\n\n        case 'number':\n          ctrlValue = rawVal.replace(/\\D/g, '');\n          break;\n\n        case 'text':\n        case 'password':\n        default:\n          break;\n      }\n\n      _this.handleOnChange(ctrlValue, ctrlValue !== rawVal, function () {\n        switch (type) {\n          case 'bankCard':\n          case 'phone':\n          case 'number':\n            // controlled input type needs to adjust the position of the caret\n            try {\n              // some input type do not support selection, see https://html.spec.whatwg.org/multipage/input.html#do-not-apply\n              var pos = _this.calcPos(prePos, preCtrlVal, rawVal, ctrlValue, [' '], /\\D/g);\n\n              if (type === 'phone' && (pos === 4 || pos === 9) || type === 'bankCard' && pos > 0 && pos % 5 === 0) {\n                pos -= 1;\n              }\n\n              el.selectionStart = el.selectionEnd = pos;\n            } catch (error) {\n              console.warn('Set selection error:', error);\n            }\n\n            break;\n\n          default:\n            break;\n        }\n      });\n    };\n\n    _this.handleOnChange = function (value) {\n      var isMutated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var adjustPos = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop;\n      var onChange = _this.props.onChange;\n\n      if (!('value' in _this.props)) {\n        _this.setState({\n          value: value\n        });\n      } else {\n        _this.setState({\n          value: _this.props.value\n        });\n      }\n\n      if (onChange) {\n        if (isMutated) {\n          setTimeout(function () {\n            onChange(value);\n            adjustPos();\n          });\n        } else {\n          onChange(value);\n          adjustPos();\n        }\n      } else {\n        adjustPos();\n      }\n    };\n\n    _this.onInputFocus = function (value) {\n      if (_this.debounceTimeout) {\n        clearTimeout(_this.debounceTimeout);\n        _this.debounceTimeout = null;\n      }\n\n      _this.setState({\n        focus: true\n      });\n\n      if (_this.props.onFocus) {\n        _this.props.onFocus(value);\n      }\n    };\n\n    _this.onInputBlur = function (value) {\n      if (_this.inputRef) {\n        // this.inputRef may be null if customKeyboard unmount\n        _this.debounceTimeout = window.setTimeout(function () {\n          if (document.activeElement !== (_this.inputRef && _this.inputRef.inputRef)) {\n            _this.setState({\n              focus: false\n            });\n          }\n        }, 200);\n      }\n\n      if (_this.props.onBlur) {\n        // fix autoFocus item blur with flash\n        setTimeout(function () {\n          // fix ios12 wechat browser click failure after input\n          if (document.body) {\n            document.body.scrollTop = document.body.scrollTop;\n          }\n        }, 100);\n\n        _this.props.onBlur(value);\n      }\n    };\n\n    _this.clearInput = function () {\n      if (_this.props.type !== 'password' && _this.props.updatePlaceholder) {\n        _this.setState({\n          placeholder: _this.props.value\n        });\n      }\n\n      _this.setState({\n        value: ''\n      });\n\n      if (_this.props.onChange) {\n        _this.props.onChange('');\n      }\n\n      _this.focus();\n    }; // this is instance method for user to use\n\n\n    _this.focus = function () {\n      if (_this.inputRef) {\n        _this.inputRef.focus();\n      }\n    }; // calculate the position of the caret\n\n\n    _this.calcPos = function (prePos, preCtrlVal, rawVal, ctrlVal, placeholderChars, maskReg) {\n      var editLength = rawVal.length - preCtrlVal.length;\n      var isAddition = editLength > 0;\n      var pos = prePos;\n\n      if (isAddition) {\n        var additionStr = rawVal.substr(pos - editLength, editLength);\n        var ctrlCharCount = additionStr.replace(maskReg, '').length;\n        pos -= editLength - ctrlCharCount;\n        var placeholderCharCount = 0;\n\n        while (ctrlCharCount > 0) {\n          if (placeholderChars.indexOf(ctrlVal.charAt(pos - ctrlCharCount + placeholderCharCount)) === -1) {\n            ctrlCharCount--;\n          } else {\n            placeholderCharCount++;\n          }\n        }\n\n        pos += placeholderCharCount;\n      }\n\n      return pos;\n    };\n\n    _this.state = {\n      placeholder: props.placeholder,\n      value: normalizeValue(props.value || props.defaultValue)\n    };\n    return _this;\n  }\n\n  _createClass(InputItem, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ('placeholder' in nextProps && !nextProps.updatePlaceholder) {\n        this.setState({\n          placeholder: nextProps.placeholder\n        });\n      }\n\n      if ('value' in nextProps) {\n        this.setState({\n          value: nextProps.value\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.debounceTimeout) {\n        window.clearTimeout(this.debounceTimeout);\n        this.debounceTimeout = null;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classnames,\n          _classnames2,\n          _this2 = this;\n\n      var props = _extends({}, this.props);\n\n      delete props.updatePlaceholder;\n\n      var prefixCls = props.prefixCls,\n          prefixListCls = props.prefixListCls,\n          editable = props.editable,\n          style = props.style,\n          clear = props.clear,\n          children = props.children,\n          error = props.error,\n          className = props.className,\n          extra = props.extra,\n          labelNumber = props.labelNumber,\n          type = props.type,\n          onExtraClick = props.onExtraClick,\n          onErrorClick = props.onErrorClick,\n          moneyKeyboardAlign = props.moneyKeyboardAlign,\n          moneyKeyboardWrapProps = props.moneyKeyboardWrapProps,\n          moneyKeyboardHeader = props.moneyKeyboardHeader,\n          onVirtualKeyboardConfirm = props.onVirtualKeyboardConfirm,\n          autoAdjustHeight = props.autoAdjustHeight,\n          disabledKeys = props.disabledKeys,\n          restProps = __rest(props, [\"prefixCls\", \"prefixListCls\", \"editable\", \"style\", \"clear\", \"children\", \"error\", \"className\", \"extra\", \"labelNumber\", \"type\", \"onExtraClick\", \"onErrorClick\", \"moneyKeyboardAlign\", \"moneyKeyboardWrapProps\", \"moneyKeyboardHeader\", \"onVirtualKeyboardConfirm\", \"autoAdjustHeight\", \"disabledKeys\"]);\n\n      var name = restProps.name,\n          disabled = restProps.disabled,\n          maxLength = restProps.maxLength;\n      var value = this.state.value; // tslint:disable-next-line:variable-name\n\n      var _locale = getComponentLocale(this.props, this.context, 'InputItem', function () {\n        return require('./locale/zh_CN');\n      });\n\n      var confirmLabel = _locale.confirmLabel,\n          backspaceLabel = _locale.backspaceLabel,\n          cancelKeyboardLabel = _locale.cancelKeyboardLabel;\n      var _state = this.state,\n          focus = _state.focus,\n          placeholder = _state.placeholder;\n      var wrapCls = classnames(prefixListCls + '-item', prefixCls + '-item', prefixListCls + '-item-middle', className, (_classnames = {}, _defineProperty(_classnames, prefixCls + '-disabled', disabled), _defineProperty(_classnames, prefixCls + '-error', error), _defineProperty(_classnames, prefixCls + '-focus', focus), _defineProperty(_classnames, prefixCls + '-android', focus), _classnames));\n      var labelCls = classnames(prefixCls + '-label', (_classnames2 = {}, _defineProperty(_classnames2, prefixCls + '-label-2', labelNumber === 2), _defineProperty(_classnames2, prefixCls + '-label-3', labelNumber === 3), _defineProperty(_classnames2, prefixCls + '-label-4', labelNumber === 4), _defineProperty(_classnames2, prefixCls + '-label-5', labelNumber === 5), _defineProperty(_classnames2, prefixCls + '-label-6', labelNumber === 6), _defineProperty(_classnames2, prefixCls + '-label-7', labelNumber === 7), _classnames2));\n      var controlCls = prefixCls + '-control';\n      var inputType = 'text';\n\n      if (type === 'bankCard' || type === 'phone') {\n        inputType = 'tel';\n      } else if (type === 'password') {\n        inputType = 'password';\n      } else if (type === 'digit') {\n        inputType = 'number';\n      } else if (type !== 'text' && type !== 'number') {\n        inputType = type;\n      }\n\n      var patternProps = void 0;\n\n      if (type === 'number') {\n        patternProps = {\n          pattern: '[0-9]*'\n        };\n      }\n\n      var classNameProps = void 0;\n\n      if (type === 'digit') {\n        classNameProps = {\n          className: 'h5numInput'\n        };\n      }\n\n      return React.createElement('div', {\n        className: wrapCls\n      }, React.createElement('div', {\n        className: prefixListCls + '-line'\n      }, children ? React.createElement('div', {\n        className: labelCls\n      }, children) : null, React.createElement('div', {\n        className: controlCls\n      }, type === 'money' ? React.createElement(CustomInput, {\n        value: normalizeValue(value),\n        type: type,\n        ref: function ref(el) {\n          return _this2.inputRef = el;\n        },\n        maxLength: maxLength,\n        placeholder: placeholder,\n        onChange: this.onInputChange,\n        onFocus: this.onInputFocus,\n        onBlur: this.onInputBlur,\n        onVirtualKeyboardConfirm: onVirtualKeyboardConfirm,\n        disabled: disabled,\n        editable: editable,\n        prefixCls: prefixCls,\n        style: style,\n        confirmLabel: confirmLabel,\n        backspaceLabel: backspaceLabel,\n        cancelKeyboardLabel: cancelKeyboardLabel,\n        moneyKeyboardAlign: moneyKeyboardAlign,\n        moneyKeyboardWrapProps: moneyKeyboardWrapProps,\n        moneyKeyboardHeader: moneyKeyboardHeader,\n        autoAdjustHeight: autoAdjustHeight,\n        disabledKeys: disabledKeys\n      }) : React.createElement(Input, _extends({}, patternProps, restProps, classNameProps, {\n        value: normalizeValue(value),\n        defaultValue: undefined,\n        ref: function ref(el) {\n          return _this2.inputRef = el;\n        },\n        style: style,\n        type: inputType,\n        maxLength: maxLength,\n        name: name,\n        placeholder: placeholder,\n        onChange: this.onInputChange,\n        onFocus: this.onInputFocus,\n        onBlur: this.onInputBlur,\n        readOnly: !editable,\n        disabled: disabled\n      }))), clear && editable && !disabled && value && ('' + value).length > 0 ? React.createElement(TouchFeedback, {\n        activeClassName: prefixCls + '-clear-active'\n      }, React.createElement('div', {\n        className: prefixCls + '-clear',\n        onClick: this.clearInput\n      })) : null, error ? React.createElement('div', {\n        className: prefixCls + '-error-extra',\n        onClick: onErrorClick\n      }) : null, extra !== '' ? React.createElement('div', {\n        className: prefixCls + '-extra',\n        onClick: onExtraClick\n      }, extra) : null));\n    }\n  }]);\n\n  return InputItem;\n}(React.Component);\n\nInputItem.defaultProps = {\n  prefixCls: 'am-input',\n  prefixListCls: 'am-list',\n  type: 'text',\n  editable: true,\n  disabled: false,\n  placeholder: '',\n  clear: false,\n  onChange: noop,\n  onBlur: noop,\n  onFocus: noop,\n  extra: '',\n  onExtraClick: noop,\n  error: false,\n  onErrorClick: noop,\n  onVirtualKeyboardConfirm: noop,\n  labelNumber: 5,\n  updatePlaceholder: false,\n  moneyKeyboardAlign: 'right',\n  moneyKeyboardWrapProps: {},\n  moneyKeyboardHeader: null,\n  disabledKeys: null\n};\nInputItem.contextTypes = {\n  antLocale: PropTypes.object\n};\nexport default InputItem;","map":{"version":3,"sources":["E:/mycode/redux-note/node_modules/antd-mobile/es/input-item/index.js"],"names":["_defineProperty","_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","classnames","PropTypes","React","TouchFeedback","getComponentLocale","CustomInput","Input","noop","normalizeValue","value","InputItem","_React$Component","props","_this","__proto__","getPrototypeOf","onInputChange","el","target","rawVal","prePos","selectionEnd","error","console","warn","_this$state$value","state","preCtrlVal","undefined","type","ctrlValue","replace","substring","valueLen","substr","handleOnChange","pos","calcPos","selectionStart","isMutated","arguments","adjustPos","onChange","setState","setTimeout","onInputFocus","debounceTimeout","clearTimeout","focus","onFocus","onInputBlur","inputRef","window","document","activeElement","onBlur","body","scrollTop","clearInput","updatePlaceholder","placeholder","ctrlVal","placeholderChars","maskReg","editLength","isAddition","additionStr","ctrlCharCount","placeholderCharCount","charAt","defaultValue","key","componentWillReceiveProps","nextProps","componentWillUnmount","render","_classnames","_classnames2","_this2","prefixCls","prefixListCls","editable","style","clear","children","className","extra","labelNumber","onExtraClick","onErrorClick","moneyKeyboardAlign","moneyKeyboardWrapProps","moneyKeyboardHeader","onVirtualKeyboardConfirm","autoAdjustHeight","disabledKeys","restProps","name","disabled","maxLength","_locale","context","require","confirmLabel","backspaceLabel","cancelKeyboardLabel","_state","wrapCls","labelCls","controlCls","inputType","patternProps","pattern","classNameProps","createElement","ref","readOnly","activeClassName","onClick","Component","defaultProps","contextTypes","antLocale","object"],"mappings":"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","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nvar __rest = this && this.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n/* tslint:disable:jsx-no-multiline-js */\nimport classnames from 'classnames';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport TouchFeedback from 'rmc-feedback';\nimport { getComponentLocale } from '../_util/getLocale';\nimport CustomInput from './CustomInput';\nimport Input from './Input';\nfunction noop() {}\nfunction normalizeValue(value) {\n    if (typeof value === 'undefined' || value === null) {\n        return '';\n    }\n    return value + '';\n}\n\nvar InputItem = function (_React$Component) {\n    _inherits(InputItem, _React$Component);\n\n    function InputItem(props) {\n        _classCallCheck(this, InputItem);\n\n        var _this = _possibleConstructorReturn(this, (InputItem.__proto__ || Object.getPrototypeOf(InputItem)).call(this, props));\n\n        _this.onInputChange = function (e) {\n            var el = e.target;\n            var rawVal = el.value;\n\n            var prePos = 0;\n            try {\n                // some input type do not support selection, see https://html.spec.whatwg.org/multipage/input.html#do-not-apply\n                prePos = el.selectionEnd || 0;\n            } catch (error) {\n                console.warn('Get selection error:', error);\n            }\n            var _this$state$value = _this.state.value,\n                preCtrlVal = _this$state$value === undefined ? '' : _this$state$value;\n            var type = _this.props.type;\n\n            var ctrlValue = rawVal;\n            switch (type) {\n                case 'bankCard':\n                    ctrlValue = rawVal.replace(/\\D/g, '').replace(/(....)(?=.)/g, '$1 ');\n                    break;\n                case 'phone':\n                    ctrlValue = rawVal.replace(/\\D/g, '').substring(0, 11);\n                    var valueLen = ctrlValue.length;\n                    if (valueLen > 3 && valueLen < 8) {\n                        ctrlValue = ctrlValue.substr(0, 3) + ' ' + ctrlValue.substr(3);\n                    } else if (valueLen >= 8) {\n                        ctrlValue = ctrlValue.substr(0, 3) + ' ' + ctrlValue.substr(3, 4) + ' ' + ctrlValue.substr(7);\n                    }\n                    break;\n                case 'number':\n                    ctrlValue = rawVal.replace(/\\D/g, '');\n                    break;\n                case 'text':\n                case 'password':\n                default:\n                    break;\n            }\n            _this.handleOnChange(ctrlValue, ctrlValue !== rawVal, function () {\n                switch (type) {\n                    case 'bankCard':\n                    case 'phone':\n                    case 'number':\n                        // controlled input type needs to adjust the position of the caret\n                        try {\n                            // some input type do not support selection, see https://html.spec.whatwg.org/multipage/input.html#do-not-apply\n                            var pos = _this.calcPos(prePos, preCtrlVal, rawVal, ctrlValue, [' '], /\\D/g);\n                            if (type === 'phone' && (pos === 4 || pos === 9) || type === 'bankCard' && pos > 0 && pos % 5 === 0) {\n                                pos -= 1;\n                            }\n                            el.selectionStart = el.selectionEnd = pos;\n                        } catch (error) {\n                            console.warn('Set selection error:', error);\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            });\n        };\n        _this.handleOnChange = function (value) {\n            var isMutated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n            var adjustPos = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop;\n            var onChange = _this.props.onChange;\n\n            if (!('value' in _this.props)) {\n                _this.setState({ value: value });\n            } else {\n                _this.setState({ value: _this.props.value });\n            }\n            if (onChange) {\n                if (isMutated) {\n                    setTimeout(function () {\n                        onChange(value);\n                        adjustPos();\n                    });\n                } else {\n                    onChange(value);\n                    adjustPos();\n                }\n            } else {\n                adjustPos();\n            }\n        };\n        _this.onInputFocus = function (value) {\n            if (_this.debounceTimeout) {\n                clearTimeout(_this.debounceTimeout);\n                _this.debounceTimeout = null;\n            }\n            _this.setState({\n                focus: true\n            });\n            if (_this.props.onFocus) {\n                _this.props.onFocus(value);\n            }\n        };\n        _this.onInputBlur = function (value) {\n            if (_this.inputRef) {\n                // this.inputRef may be null if customKeyboard unmount\n                _this.debounceTimeout = window.setTimeout(function () {\n                    if (document.activeElement !== (_this.inputRef && _this.inputRef.inputRef)) {\n                        _this.setState({\n                            focus: false\n                        });\n                    }\n                }, 200);\n            }\n            if (_this.props.onBlur) {\n                // fix autoFocus item blur with flash\n                setTimeout(function () {\n                    // fix ios12 wechat browser click failure after input\n                    if (document.body) {\n                        document.body.scrollTop = document.body.scrollTop;\n                    }\n                }, 100);\n                _this.props.onBlur(value);\n            }\n        };\n        _this.clearInput = function () {\n            if (_this.props.type !== 'password' && _this.props.updatePlaceholder) {\n                _this.setState({\n                    placeholder: _this.props.value\n                });\n            }\n            _this.setState({\n                value: ''\n            });\n            if (_this.props.onChange) {\n                _this.props.onChange('');\n            }\n            _this.focus();\n        };\n        // this is instance method for user to use\n        _this.focus = function () {\n            if (_this.inputRef) {\n                _this.inputRef.focus();\n            }\n        };\n        // calculate the position of the caret\n        _this.calcPos = function (prePos, preCtrlVal, rawVal, ctrlVal, placeholderChars, maskReg) {\n            var editLength = rawVal.length - preCtrlVal.length;\n            var isAddition = editLength > 0;\n            var pos = prePos;\n            if (isAddition) {\n                var additionStr = rawVal.substr(pos - editLength, editLength);\n                var ctrlCharCount = additionStr.replace(maskReg, '').length;\n                pos -= editLength - ctrlCharCount;\n                var placeholderCharCount = 0;\n                while (ctrlCharCount > 0) {\n                    if (placeholderChars.indexOf(ctrlVal.charAt(pos - ctrlCharCount + placeholderCharCount)) === -1) {\n                        ctrlCharCount--;\n                    } else {\n                        placeholderCharCount++;\n                    }\n                }\n                pos += placeholderCharCount;\n            }\n            return pos;\n        };\n        _this.state = {\n            placeholder: props.placeholder,\n            value: normalizeValue(props.value || props.defaultValue)\n        };\n        return _this;\n    }\n\n    _createClass(InputItem, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if ('placeholder' in nextProps && !nextProps.updatePlaceholder) {\n                this.setState({\n                    placeholder: nextProps.placeholder\n                });\n            }\n            if ('value' in nextProps) {\n                this.setState({\n                    value: nextProps.value\n                });\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.debounceTimeout) {\n                window.clearTimeout(this.debounceTimeout);\n                this.debounceTimeout = null;\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _classnames,\n                _classnames2,\n                _this2 = this;\n\n            var props = _extends({}, this.props);\n            delete props.updatePlaceholder;\n\n            var prefixCls = props.prefixCls,\n                prefixListCls = props.prefixListCls,\n                editable = props.editable,\n                style = props.style,\n                clear = props.clear,\n                children = props.children,\n                error = props.error,\n                className = props.className,\n                extra = props.extra,\n                labelNumber = props.labelNumber,\n                type = props.type,\n                onExtraClick = props.onExtraClick,\n                onErrorClick = props.onErrorClick,\n                moneyKeyboardAlign = props.moneyKeyboardAlign,\n                moneyKeyboardWrapProps = props.moneyKeyboardWrapProps,\n                moneyKeyboardHeader = props.moneyKeyboardHeader,\n                onVirtualKeyboardConfirm = props.onVirtualKeyboardConfirm,\n                autoAdjustHeight = props.autoAdjustHeight,\n                disabledKeys = props.disabledKeys,\n                restProps = __rest(props, [\"prefixCls\", \"prefixListCls\", \"editable\", \"style\", \"clear\", \"children\", \"error\", \"className\", \"extra\", \"labelNumber\", \"type\", \"onExtraClick\", \"onErrorClick\", \"moneyKeyboardAlign\", \"moneyKeyboardWrapProps\", \"moneyKeyboardHeader\", \"onVirtualKeyboardConfirm\", \"autoAdjustHeight\", \"disabledKeys\"]);\n\n            var name = restProps.name,\n                disabled = restProps.disabled,\n                maxLength = restProps.maxLength;\n            var value = this.state.value;\n            // tslint:disable-next-line:variable-name\n\n            var _locale = getComponentLocale(this.props, this.context, 'InputItem', function () {\n                return require('./locale/zh_CN');\n            });\n            var confirmLabel = _locale.confirmLabel,\n                backspaceLabel = _locale.backspaceLabel,\n                cancelKeyboardLabel = _locale.cancelKeyboardLabel;\n            var _state = this.state,\n                focus = _state.focus,\n                placeholder = _state.placeholder;\n\n            var wrapCls = classnames(prefixListCls + '-item', prefixCls + '-item', prefixListCls + '-item-middle', className, (_classnames = {}, _defineProperty(_classnames, prefixCls + '-disabled', disabled), _defineProperty(_classnames, prefixCls + '-error', error), _defineProperty(_classnames, prefixCls + '-focus', focus), _defineProperty(_classnames, prefixCls + '-android', focus), _classnames));\n            var labelCls = classnames(prefixCls + '-label', (_classnames2 = {}, _defineProperty(_classnames2, prefixCls + '-label-2', labelNumber === 2), _defineProperty(_classnames2, prefixCls + '-label-3', labelNumber === 3), _defineProperty(_classnames2, prefixCls + '-label-4', labelNumber === 4), _defineProperty(_classnames2, prefixCls + '-label-5', labelNumber === 5), _defineProperty(_classnames2, prefixCls + '-label-6', labelNumber === 6), _defineProperty(_classnames2, prefixCls + '-label-7', labelNumber === 7), _classnames2));\n            var controlCls = prefixCls + '-control';\n            var inputType = 'text';\n            if (type === 'bankCard' || type === 'phone') {\n                inputType = 'tel';\n            } else if (type === 'password') {\n                inputType = 'password';\n            } else if (type === 'digit') {\n                inputType = 'number';\n            } else if (type !== 'text' && type !== 'number') {\n                inputType = type;\n            }\n            var patternProps = void 0;\n            if (type === 'number') {\n                patternProps = {\n                    pattern: '[0-9]*'\n                };\n            }\n            var classNameProps = void 0;\n            if (type === 'digit') {\n                classNameProps = {\n                    className: 'h5numInput'\n                };\n            }\n            return React.createElement(\n                'div',\n                { className: wrapCls },\n                React.createElement(\n                    'div',\n                    { className: prefixListCls + '-line' },\n                    children ? React.createElement(\n                        'div',\n                        { className: labelCls },\n                        children\n                    ) : null,\n                    React.createElement(\n                        'div',\n                        { className: controlCls },\n                        type === 'money' ? React.createElement(CustomInput, { value: normalizeValue(value), type: type, ref: function ref(el) {\n                                return _this2.inputRef = el;\n                            }, maxLength: maxLength, placeholder: placeholder, onChange: this.onInputChange, onFocus: this.onInputFocus, onBlur: this.onInputBlur, onVirtualKeyboardConfirm: onVirtualKeyboardConfirm, disabled: disabled, editable: editable, prefixCls: prefixCls, style: style, confirmLabel: confirmLabel, backspaceLabel: backspaceLabel, cancelKeyboardLabel: cancelKeyboardLabel, moneyKeyboardAlign: moneyKeyboardAlign, moneyKeyboardWrapProps: moneyKeyboardWrapProps, moneyKeyboardHeader: moneyKeyboardHeader, autoAdjustHeight: autoAdjustHeight, disabledKeys: disabledKeys }) : React.createElement(Input, _extends({}, patternProps, restProps, classNameProps, { value: normalizeValue(value), defaultValue: undefined, ref: function ref(el) {\n                                return _this2.inputRef = el;\n                            }, style: style, type: inputType, maxLength: maxLength, name: name, placeholder: placeholder, onChange: this.onInputChange, onFocus: this.onInputFocus, onBlur: this.onInputBlur, readOnly: !editable, disabled: disabled }))\n                    ),\n                    clear && editable && !disabled && value && ('' + value).length > 0 ? React.createElement(\n                        TouchFeedback,\n                        { activeClassName: prefixCls + '-clear-active' },\n                        React.createElement('div', { className: prefixCls + '-clear', onClick: this.clearInput })\n                    ) : null,\n                    error ? React.createElement('div', { className: prefixCls + '-error-extra', onClick: onErrorClick }) : null,\n                    extra !== '' ? React.createElement(\n                        'div',\n                        { className: prefixCls + '-extra', onClick: onExtraClick },\n                        extra\n                    ) : null\n                )\n            );\n        }\n    }]);\n\n    return InputItem;\n}(React.Component);\n\nInputItem.defaultProps = {\n    prefixCls: 'am-input',\n    prefixListCls: 'am-list',\n    type: 'text',\n    editable: true,\n    disabled: false,\n    placeholder: '',\n    clear: false,\n    onChange: noop,\n    onBlur: noop,\n    onFocus: noop,\n    extra: '',\n    onExtraClick: noop,\n    error: false,\n    onErrorClick: noop,\n    onVirtualKeyboardConfirm: noop,\n    labelNumber: 5,\n    updatePlaceholder: false,\n    moneyKeyboardAlign: 'right',\n    moneyKeyboardWrapProps: {},\n    moneyKeyboardHeader: null,\n    disabledKeys: null\n};\nInputItem.contextTypes = {\n    antLocale: PropTypes.object\n};\nexport default InputItem;"]},"metadata":{},"sourceType":"module"}