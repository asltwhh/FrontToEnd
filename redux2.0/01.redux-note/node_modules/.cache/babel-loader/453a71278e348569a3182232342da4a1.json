{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/* tslint:disable:jsx-no-multiline-js */\n\n\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport TouchFeedback from 'rmc-feedback';\nimport { IS_IOS } from '../_util/exenv';\n\nfunction noop() {}\n\nfunction fixControlledValue(value) {\n  if (typeof value === 'undefined' || value === null) {\n    return '';\n  }\n\n  return value;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\n/g;\n\nfunction countSymbols() {\n  var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return text.replace(regexAstralSymbols, '_').length;\n}\n\nvar TextareaItem = function (_React$Component) {\n  _inherits(TextareaItem, _React$Component);\n\n  function TextareaItem(props) {\n    _classCallCheck(this, TextareaItem);\n\n    var _this = _possibleConstructorReturn(this, (TextareaItem.__proto__ || Object.getPrototypeOf(TextareaItem)).call(this, props));\n\n    _this.focus = function () {\n      _this.textareaRef.focus();\n    };\n\n    _this.reAlignHeight = function () {\n      var textareaDom = _this.textareaRef;\n      textareaDom.style.height = ''; // 字数减少时能自动减小高度\n\n      textareaDom.style.height = textareaDom.scrollHeight + 'px';\n    };\n\n    _this.onChange = function (e) {\n      var value = e.target.value;\n\n      if ('value' in _this.props) {\n        _this.setState({\n          value: _this.props.value\n        });\n      } else {\n        _this.setState({\n          value: value\n        });\n      }\n\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange(value);\n      } // 设置 defaultValue 时，用户输入不会触发 componentDidUpdate ，此处手工调用\n\n\n      _this.componentDidUpdate();\n    };\n\n    _this.onBlur = function (e) {\n      _this.debounceTimeout = setTimeout(function () {\n        if (document.activeElement !== _this.textareaRef) {\n          _this.setState({\n            focus: false\n          });\n        }\n      }, 100);\n      var value = e.currentTarget.value;\n\n      if (_this.props.onBlur) {\n        // fix autoFocus item blur with flash\n        setTimeout(function () {\n          // fix ios12 wechat browser click failure after input\n          if (document.body) {\n            document.body.scrollTop = document.body.scrollTop;\n          }\n        }, 100);\n\n        _this.props.onBlur(value);\n      }\n    };\n\n    _this.onFocus = function (e) {\n      if (_this.debounceTimeout) {\n        clearTimeout(_this.debounceTimeout);\n        _this.debounceTimeout = null;\n      }\n\n      _this.setState({\n        focus: true\n      });\n\n      var value = e.currentTarget.value;\n\n      if (_this.props.onFocus) {\n        _this.props.onFocus(value);\n      }\n    };\n\n    _this.onErrorClick = function () {\n      if (_this.props.onErrorClick) {\n        _this.props.onErrorClick();\n      }\n    };\n\n    _this.clearInput = function () {\n      _this.setState({\n        value: ''\n      });\n\n      if (_this.props.onChange) {\n        _this.props.onChange('');\n      }\n    };\n\n    _this.state = {\n      focus: false,\n      value: props.value || props.defaultValue || ''\n    };\n    return _this;\n  }\n\n  _createClass(TextareaItem, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ('value' in nextProps) {\n        this.setState({\n          value: fixControlledValue(nextProps.value)\n        });\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.autoHeight) {\n        this.reAlignHeight();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.props.autoHeight) {\n        this.reAlignHeight();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.debounceTimeout) {\n        clearTimeout(this.debounceTimeout);\n        this.debounceTimeout = null;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classnames,\n          _classnames2,\n          _this2 = this;\n\n      var _a = this.props,\n          prefixCls = _a.prefixCls,\n          prefixListCls = _a.prefixListCls,\n          editable = _a.editable,\n          style = _a.style,\n          clear = _a.clear,\n          children = _a.children,\n          error = _a.error,\n          className = _a.className,\n          count = _a.count,\n          labelNumber = _a.labelNumber,\n          title = _a.title,\n          onErrorClick = _a.onErrorClick,\n          autoHeight = _a.autoHeight,\n          defaultValue = _a.defaultValue,\n          otherProps = __rest(_a, [\"prefixCls\", \"prefixListCls\", \"editable\", \"style\", \"clear\", \"children\", \"error\", \"className\", \"count\", \"labelNumber\", \"title\", \"onErrorClick\", \"autoHeight\", \"defaultValue\"]);\n\n      var disabled = otherProps.disabled;\n      var _state = this.state,\n          value = _state.value,\n          focus = _state.focus;\n      var hasCount = count > 0 && this.props.rows > 1;\n      var wrapCls = classnames(className, prefixListCls + '-item', prefixCls + '-item', (_classnames = {}, _defineProperty(_classnames, prefixCls + '-disabled', disabled), _defineProperty(_classnames, prefixCls + '-item-single-line', this.props.rows === 1 && !autoHeight), _defineProperty(_classnames, prefixCls + '-error', error), _defineProperty(_classnames, prefixCls + '-focus', focus), _defineProperty(_classnames, prefixCls + '-has-count', hasCount), _classnames));\n      var labelCls = classnames(prefixCls + '-label', (_classnames2 = {}, _defineProperty(_classnames2, prefixCls + '-label-2', labelNumber === 2), _defineProperty(_classnames2, prefixCls + '-label-3', labelNumber === 3), _defineProperty(_classnames2, prefixCls + '-label-4', labelNumber === 4), _defineProperty(_classnames2, prefixCls + '-label-5', labelNumber === 5), _defineProperty(_classnames2, prefixCls + '-label-6', labelNumber === 6), _defineProperty(_classnames2, prefixCls + '-label-7', labelNumber === 7), _classnames2));\n      var characterLength = countSymbols(value);\n      var lengthCtrlProps = {};\n\n      if (count > 0) {\n        // Note: If in the iOS environment of dev-tools, It will fail.\n        if (IS_IOS) {\n          var entValue = value ? value.replace(regexAstralSymbols, '_') : '';\n          var entLen = entValue ? entValue.split('_').length - 1 : 0;\n          lengthCtrlProps.maxLength = count + entLen - characterLength + (value ? value.length : 0);\n        } else {\n          lengthCtrlProps.maxLength = count - characterLength + (value ? value.length : 0);\n        }\n      }\n\n      return React.createElement('div', {\n        className: wrapCls\n      }, title && React.createElement('div', {\n        className: labelCls\n      }, title), React.createElement('div', {\n        className: prefixCls + '-control'\n      }, React.createElement('textarea', _extends({\n        ref: function ref(el) {\n          return _this2.textareaRef = el;\n        }\n      }, lengthCtrlProps, otherProps, {\n        value: value,\n        onChange: this.onChange,\n        onBlur: this.onBlur,\n        onFocus: this.onFocus,\n        readOnly: !editable,\n        style: style\n      }))), clear && editable && value && characterLength > 0 && React.createElement(TouchFeedback, {\n        activeClassName: prefixCls + '-clear-active'\n      }, React.createElement('div', {\n        className: prefixCls + '-clear',\n        onClick: this.clearInput\n      })), error && React.createElement('div', {\n        className: prefixCls + '-error-extra',\n        onClick: this.onErrorClick\n      }), hasCount && React.createElement('span', {\n        className: prefixCls + '-count'\n      }, React.createElement('span', null, value ? characterLength : 0), '/', count));\n    }\n  }]);\n\n  return TextareaItem;\n}(React.Component);\n\nexport default TextareaItem;\nTextareaItem.defaultProps = {\n  prefixCls: 'am-textarea',\n  prefixListCls: 'am-list',\n  autoHeight: false,\n  editable: true,\n  disabled: false,\n  placeholder: '',\n  clear: false,\n  rows: 1,\n  onChange: noop,\n  onBlur: noop,\n  onFocus: noop,\n  onErrorClick: noop,\n  error: false,\n  labelNumber: 5\n};","map":{"version":3,"sources":["E:/mycode/redux-note/node_modules/antd-mobile/es/textarea-item/index.js"],"names":["_extends","_defineProperty","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","classnames","React","TouchFeedback","IS_IOS","noop","fixControlledValue","value","regexAstralSymbols","countSymbols","text","arguments","undefined","replace","TextareaItem","_React$Component","props","_this","__proto__","getPrototypeOf","focus","textareaRef","reAlignHeight","textareaDom","style","height","scrollHeight","onChange","target","setState","componentDidUpdate","onBlur","debounceTimeout","setTimeout","document","activeElement","currentTarget","body","scrollTop","onFocus","clearTimeout","onErrorClick","clearInput","state","defaultValue","key","componentWillReceiveProps","nextProps","componentDidMount","autoHeight","componentWillUnmount","render","_classnames","_classnames2","_this2","_a","prefixCls","prefixListCls","editable","clear","children","error","className","count","labelNumber","title","otherProps","disabled","_state","hasCount","rows","wrapCls","labelCls","characterLength","lengthCtrlProps","entValue","entLen","split","maxLength","createElement","ref","el","readOnly","activeClassName","onClick","Component","defaultProps","placeholder"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nvar __rest = this && this.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n/* tslint:disable:jsx-no-multiline-js */\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport TouchFeedback from 'rmc-feedback';\nimport { IS_IOS } from '../_util/exenv';\nfunction noop() {}\nfunction fixControlledValue(value) {\n    if (typeof value === 'undefined' || value === null) {\n        return '';\n    }\n    return value;\n}\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\n/g;\nfunction countSymbols() {\n    var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n    return text.replace(regexAstralSymbols, '_').length;\n}\n\nvar TextareaItem = function (_React$Component) {\n    _inherits(TextareaItem, _React$Component);\n\n    function TextareaItem(props) {\n        _classCallCheck(this, TextareaItem);\n\n        var _this = _possibleConstructorReturn(this, (TextareaItem.__proto__ || Object.getPrototypeOf(TextareaItem)).call(this, props));\n\n        _this.focus = function () {\n            _this.textareaRef.focus();\n        };\n        _this.reAlignHeight = function () {\n            var textareaDom = _this.textareaRef;\n            textareaDom.style.height = ''; // 字数减少时能自动减小高度\n            textareaDom.style.height = textareaDom.scrollHeight + 'px';\n        };\n        _this.onChange = function (e) {\n            var value = e.target.value;\n            if ('value' in _this.props) {\n                _this.setState({ value: _this.props.value });\n            } else {\n                _this.setState({ value: value });\n            }\n            var onChange = _this.props.onChange;\n\n            if (onChange) {\n                onChange(value);\n            }\n            // 设置 defaultValue 时，用户输入不会触发 componentDidUpdate ，此处手工调用\n            _this.componentDidUpdate();\n        };\n        _this.onBlur = function (e) {\n            _this.debounceTimeout = setTimeout(function () {\n                if (document.activeElement !== _this.textareaRef) {\n                    _this.setState({\n                        focus: false\n                    });\n                }\n            }, 100);\n            var value = e.currentTarget.value;\n            if (_this.props.onBlur) {\n                // fix autoFocus item blur with flash\n                setTimeout(function () {\n                    // fix ios12 wechat browser click failure after input\n                    if (document.body) {\n                        document.body.scrollTop = document.body.scrollTop;\n                    }\n                }, 100);\n                _this.props.onBlur(value);\n            }\n        };\n        _this.onFocus = function (e) {\n            if (_this.debounceTimeout) {\n                clearTimeout(_this.debounceTimeout);\n                _this.debounceTimeout = null;\n            }\n            _this.setState({\n                focus: true\n            });\n            var value = e.currentTarget.value;\n            if (_this.props.onFocus) {\n                _this.props.onFocus(value);\n            }\n        };\n        _this.onErrorClick = function () {\n            if (_this.props.onErrorClick) {\n                _this.props.onErrorClick();\n            }\n        };\n        _this.clearInput = function () {\n            _this.setState({\n                value: ''\n            });\n            if (_this.props.onChange) {\n                _this.props.onChange('');\n            }\n        };\n        _this.state = {\n            focus: false,\n            value: props.value || props.defaultValue || ''\n        };\n        return _this;\n    }\n\n    _createClass(TextareaItem, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if ('value' in nextProps) {\n                this.setState({\n                    value: fixControlledValue(nextProps.value)\n                });\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (this.props.autoHeight) {\n                this.reAlignHeight();\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            if (this.props.autoHeight) {\n                this.reAlignHeight();\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.debounceTimeout) {\n                clearTimeout(this.debounceTimeout);\n                this.debounceTimeout = null;\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _classnames,\n                _classnames2,\n                _this2 = this;\n\n            var _a = this.props,\n                prefixCls = _a.prefixCls,\n                prefixListCls = _a.prefixListCls,\n                editable = _a.editable,\n                style = _a.style,\n                clear = _a.clear,\n                children = _a.children,\n                error = _a.error,\n                className = _a.className,\n                count = _a.count,\n                labelNumber = _a.labelNumber,\n                title = _a.title,\n                onErrorClick = _a.onErrorClick,\n                autoHeight = _a.autoHeight,\n                defaultValue = _a.defaultValue,\n                otherProps = __rest(_a, [\"prefixCls\", \"prefixListCls\", \"editable\", \"style\", \"clear\", \"children\", \"error\", \"className\", \"count\", \"labelNumber\", \"title\", \"onErrorClick\", \"autoHeight\", \"defaultValue\"]);var disabled = otherProps.disabled;\n            var _state = this.state,\n                value = _state.value,\n                focus = _state.focus;\n\n            var hasCount = count > 0 && this.props.rows > 1;\n            var wrapCls = classnames(className, prefixListCls + '-item', prefixCls + '-item', (_classnames = {}, _defineProperty(_classnames, prefixCls + '-disabled', disabled), _defineProperty(_classnames, prefixCls + '-item-single-line', this.props.rows === 1 && !autoHeight), _defineProperty(_classnames, prefixCls + '-error', error), _defineProperty(_classnames, prefixCls + '-focus', focus), _defineProperty(_classnames, prefixCls + '-has-count', hasCount), _classnames));\n            var labelCls = classnames(prefixCls + '-label', (_classnames2 = {}, _defineProperty(_classnames2, prefixCls + '-label-2', labelNumber === 2), _defineProperty(_classnames2, prefixCls + '-label-3', labelNumber === 3), _defineProperty(_classnames2, prefixCls + '-label-4', labelNumber === 4), _defineProperty(_classnames2, prefixCls + '-label-5', labelNumber === 5), _defineProperty(_classnames2, prefixCls + '-label-6', labelNumber === 6), _defineProperty(_classnames2, prefixCls + '-label-7', labelNumber === 7), _classnames2));\n            var characterLength = countSymbols(value);\n            var lengthCtrlProps = {};\n            if (count > 0) {\n                // Note: If in the iOS environment of dev-tools, It will fail.\n                if (IS_IOS) {\n                    var entValue = value ? value.replace(regexAstralSymbols, '_') : '';\n                    var entLen = entValue ? entValue.split('_').length - 1 : 0;\n                    lengthCtrlProps.maxLength = count + entLen - characterLength + (value ? value.length : 0);\n                } else {\n                    lengthCtrlProps.maxLength = count - characterLength + (value ? value.length : 0);\n                }\n            }\n            return React.createElement(\n                'div',\n                { className: wrapCls },\n                title && React.createElement(\n                    'div',\n                    { className: labelCls },\n                    title\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-control' },\n                    React.createElement('textarea', _extends({ ref: function ref(el) {\n                            return _this2.textareaRef = el;\n                        } }, lengthCtrlProps, otherProps, { value: value, onChange: this.onChange, onBlur: this.onBlur, onFocus: this.onFocus, readOnly: !editable, style: style }))\n                ),\n                clear && editable && value && characterLength > 0 && React.createElement(\n                    TouchFeedback,\n                    { activeClassName: prefixCls + '-clear-active' },\n                    React.createElement('div', { className: prefixCls + '-clear', onClick: this.clearInput })\n                ),\n                error && React.createElement('div', { className: prefixCls + '-error-extra', onClick: this.onErrorClick }),\n                hasCount && React.createElement(\n                    'span',\n                    { className: prefixCls + '-count' },\n                    React.createElement(\n                        'span',\n                        null,\n                        value ? characterLength : 0\n                    ),\n                    '/',\n                    count\n                )\n            );\n        }\n    }]);\n\n    return TextareaItem;\n}(React.Component);\n\nexport default TextareaItem;\n\nTextareaItem.defaultProps = {\n    prefixCls: 'am-textarea',\n    prefixListCls: 'am-list',\n    autoHeight: false,\n    editable: true,\n    disabled: false,\n    placeholder: '',\n    clear: false,\n    rows: 1,\n    onChange: noop,\n    onBlur: noop,\n    onFocus: noop,\n    onErrorClick: noop,\n    error: false,\n    labelNumber: 5\n};"]},"metadata":{},"sourceType":"module"}